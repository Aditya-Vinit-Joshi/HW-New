{% extends 'base.html' %}
{% load static %}

{% block title %}Admin Dashboard - AI Learning Hub{% endblock %}

{% block extra_css %}
<link href="{% static 'css/admin.css' %}" rel="stylesheet">
<style>
.resource-type {
    background-color: #f8f9fa; /* Light background color */
    color: #333; /* Dark text color for contrast */
    padding: 10px 15px; /* Add some padding */
    border-radius: 5px; /* Rounded corners */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
    font-weight: bold; /* Make the text bold */
    display: inline-block; /* Ensure it doesn't take the full width */
    margin-bottom: 10px; /* Add some space below */
}
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Resource Management</h5>
                </div>
                <div class="card-body">
                    <div class="list-group">
                        <a href="{% url 'resources:admin_approval' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-clock text-warning me-2"></i>Pending Resources
                            <span class="badge bg-warning float-end" id="pending-count">{{ pending_count }}</span>
                        </a>
                        <a href="{% url 'resources:admin_approval' %}?filter=rejected" class="list-group-item list-group-item-action">
                            <i class="fas fa-times-circle text-danger me-2"></i>Rejected Resources
                            <span class="badge bg-danger float-end">{{ rejected_count }}</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Quick Actions</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="d-grid">
                                <a href="{% url 'resources:admin_approval' %}" class="btn btn-warning">
                                    <i class="fas fa-clock me-2"></i>Review Pending Resources
                                </a>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-grid">
                                <a href="{% url 'resources:admin_approval' %}?filter=rejected" class="btn btn-danger">
                                    <i class="fas fa-times-circle me-2"></i>View Rejected Resources
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-info mt-4">
                        <h4><i class="fas fa-info-circle me-2"></i>Administrator Instructions</h4>
                        <p>As an administrator, you can:</p>
                        <ul>
                            <li>Review resources submitted by users</li>
                            <li>Approve resources to make them visible on the platform</li>
                            <li>Reject inappropriate or low-quality resources</li>
                            <li>Edit resources to fix issues or improve quality</li>
                        </ul>
                        <p class="mb-0"><strong>Note:</strong> Resources must be approved before they appear in public listings.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Update pending count periodically
    function updatePendingCount() {
        $.get('{% url "resources:admin_approval" %}?format=json', function(data) {
            $('#pending-count').text(data.pending_count);
            if (data.pending_count === 0) {
                $('#pending-count-alert').html('<i class="fas fa-check-circle me-2"></i> All pending resources have been reviewed. Good job!');
            }
        });
    }

    // Update count every 30 seconds
    setInterval(updatePendingCount, 30000);
    updatePendingCount(); // Initial update
});
</script>
{% endblock %} 